{"version":3,"sources":["../../index.ts","../../src/stores-v1-abandoned-cart-abandoned-carts.public.ts","../../src/stores-v1-abandoned-cart-abandoned-carts.universal.ts","../../src/stores-v1-abandoned-cart-abandoned-carts.http.ts","../../src/stores-v1-abandoned-cart-abandoned-carts.context.ts"],"sourcesContent":["export * from './src/stores-v1-abandoned-cart-abandoned-carts.context.js';\n","import { renameKeysFromRESTResponseToSDKResponse } from '@wix/sdk-runtime/rename-all-nested-keys';\nimport { transformRESTFloatToSDKFloat } from '@wix/sdk-runtime/transformations/float';\nimport { transformRESTTimestampToSDKTimestamp } from '@wix/sdk-runtime/transformations/timestamp';\nimport { transformPaths } from '@wix/sdk-runtime/transformations/transform-paths';\nimport { EventDefinition, HttpClient, NonNullablePaths } from '@wix/sdk-types';\nimport {\n  AbandonedCart,\n  AbandonedCartCartAbandonedEnvelope,\n  AbandonedCartCartRecoveredEnvelope,\n  QueryAbandonedCartsOptions,\n  QueryAbandonedCartsResponse,\n  getAbandonedCart as universalGetAbandonedCart,\n  queryAbandonedCarts as universalQueryAbandonedCarts,\n} from './stores-v1-abandoned-cart-abandoned-carts.universal.js';\n\nexport const __metadata = { PACKAGE_NAME: '@wix/stores' };\n\n/** @internal */\nexport function getAbandonedCart(\n  httpClient: HttpClient\n): GetAbandonedCartSignature {\n  return (_id: string) =>\n    universalGetAbandonedCart(\n      _id,\n      // @ts-ignore\n      { httpClient }\n    );\n}\n\ninterface GetAbandonedCartSignature {\n  /**\n   * Returns abandoned carts based on the cart ID\n   * @param - Cart ID\n   * @returns Cart details\n   * @deprecated\n   */\n  (_id: string): Promise<\n    NonNullablePaths<\n      AbandonedCart,\n      | `_id`\n      | `status`\n      | `buyerInfo._id`\n      | `buyerInfo.identityType`\n      | `activities`\n      | `activities.${number}.activityType`,\n      4\n    >\n  >;\n}\n\n/** @internal */\nexport function queryAbandonedCarts(\n  httpClient: HttpClient\n): QueryAbandonedCartsSignature {\n  return (options?: QueryAbandonedCartsOptions) =>\n    universalQueryAbandonedCarts(\n      options,\n      // @ts-ignore\n      { httpClient }\n    );\n}\n\ninterface QueryAbandonedCartsSignature {\n  /**\n   * Returns abandoned carts based on the requested query parameters\n   * @deprecated\n   */\n  (options?: QueryAbandonedCartsOptions): Promise<\n    NonNullablePaths<\n      QueryAbandonedCartsResponse,\n      | `abandonedCarts`\n      | `abandonedCarts.${number}._id`\n      | `abandonedCarts.${number}.status`\n      | `abandonedCarts.${number}.buyerInfo._id`\n      | `abandonedCarts.${number}.buyerInfo.identityType`\n      | `totalResults`,\n      5\n    >\n  >;\n}\n\nexport const onAbandonedCartCartAbandonedEvent = EventDefinition(\n  'com.wix.ecommerce.cart.abandonment.api.v1.CartAbandonedEvent',\n  false,\n  (event: AbandonedCartCartAbandonedEnvelope) =>\n    renameKeysFromRESTResponseToSDKResponse(\n      transformPaths(event, [\n        {\n          transformFn: transformRESTTimestampToSDKTimestamp,\n          paths: [{ path: 'data.creationTime' }, { path: 'data.abandonTime' }],\n        },\n        {\n          transformFn: transformRESTFloatToSDKFloat,\n          paths: [\n            { path: 'data.totals.subtotal' },\n            { path: 'data.totals.total' },\n          ],\n        },\n      ])\n    )\n)<AbandonedCartCartAbandonedEnvelope>();\nexport const onAbandonedCartCartRecoveredEvent = EventDefinition(\n  'com.wix.ecommerce.cart.abandonment.api.v1.CartRecoveredEvent',\n  false,\n  (event: AbandonedCartCartRecoveredEnvelope) =>\n    renameKeysFromRESTResponseToSDKResponse(\n      transformPaths(event, [\n        {\n          transformFn: transformRESTTimestampToSDKTimestamp,\n          paths: [\n            { path: 'data.recoveredTime' },\n            { path: 'data.creationTime' },\n            { path: 'data.abandonedTime' },\n          ],\n        },\n      ])\n    )\n)<AbandonedCartCartRecoveredEnvelope>();\n\nexport {\n  AbandonedCart,\n  AbandonedCartCartAbandonedEnvelope,\n  AbandonedCartCartRecoveredEnvelope,\n  Activity,\n  ActivityType,\n  BaseEventMetadata,\n  BuyerInfo,\n  CartAbandonedEvent,\n  CartDeletedEvent,\n  CartRecoveredEvent,\n  CustomData,\n  DeleteCartRequest,\n  DeleteCartResponse,\n  GetAbandonedCartRequest,\n  GetAbandonedCartResponse,\n  HeadersEntry,\n  IdentificationData,\n  IdentificationDataIdOneOf,\n  Identity,\n  MessageEnvelope,\n  Paging,\n  Query,\n  QueryAbandonedCartsOptions,\n  QueryAbandonedCartsRequest,\n  QueryAbandonedCartsResponse,\n  RawHttpResponse,\n  RedirectToCheckoutRequest,\n  Status,\n  Totals,\n  WebhookIdentityType,\n} from './stores-v1-abandoned-cart-abandoned-carts.universal.js';\n","import { transformError as sdkTransformError } from '@wix/sdk-runtime/transform-error';\nimport {\n  renameKeysFromSDKRequestToRESTRequest,\n  renameKeysFromRESTResponseToSDKResponse,\n} from '@wix/sdk-runtime/rename-all-nested-keys';\nimport { HttpClient, NonNullablePaths } from '@wix/sdk-types';\nimport * as ambassadorWixStoresV1AbandonedCart from './stores-v1-abandoned-cart-abandoned-carts.http.js';\n\nexport interface AbandonedCart {\n  /**\n   * Original cart ID\n   * @format GUID\n   */\n  _id?: string;\n  /** Cart status */\n  status?: StatusWithLiterals;\n  /**\n   * Time the cart was abandoned\n   * @readonly\n   */\n  abandonTime?: Date | null;\n  /** Buyer information */\n  buyerInfo?: BuyerInfo;\n  /** Cart total including currency symbol */\n  total?: string | null;\n  /**\n   * History activities\n   * @readonly\n   */\n  activities?: Activity[];\n}\n\nexport enum Status {\n  ABANDONED = 'ABANDONED',\n  RECOVERED = 'RECOVERED',\n}\n\n/** @enumType */\nexport type StatusWithLiterals = Status | 'ABANDONED' | 'RECOVERED';\n\nexport interface BuyerInfo {\n  /**\n   * Wix customer ID\n   * @format GUID\n   */\n  _id?: string;\n  /** Customer information */\n  identityType?: IdentityWithLiterals;\n  /**\n   * Customer's email address\n   * @maxLength 50\n   * @format EMAIL\n   */\n  email?: string | null;\n  /**\n   * Customer's phone number\n   * @format PHONE\n   */\n  phone?: string | null;\n  /** Customer's first name */\n  firstName?: string | null;\n  /** Customer's last name */\n  lastName?: string | null;\n}\n\nexport enum Identity {\n  /** Customer is the site owner */\n  ADMIN = 'ADMIN',\n  /** Customer is logged in */\n  MEMBER = 'MEMBER',\n  /** Customer is not logged in */\n  VISITOR = 'VISITOR',\n  /** Contact was created for the customer */\n  CONTACT = 'CONTACT',\n}\n\n/** @enumType */\nexport type IdentityWithLiterals =\n  | Identity\n  | 'ADMIN'\n  | 'MEMBER'\n  | 'VISITOR'\n  | 'CONTACT';\n\nexport interface Activity {\n  /**\n   * Log item type\n   * @readonly\n   */\n  activityType?: ActivityTypeWithLiterals;\n  /**\n   * Comment added to Log item\n   * @maxLength 1000\n   * @readonly\n   */\n  message?: string | null;\n  /**\n   * Log item occurrence timestamp\n   * @readonly\n   */\n  timestamp?: Date | null;\n  /** Custom data for un-typed activities */\n  customData?: CustomData;\n}\n\nexport enum ActivityType {\n  UNRECOGNIZED_TYPE = 'UNRECOGNIZED_TYPE',\n  SCHEDULED = 'SCHEDULED',\n  EMAIL_SENT = 'EMAIL_SENT',\n  EMAIL_NOT_SENT = 'EMAIL_NOT_SENT',\n  NOTIFICATION_SENT = 'NOTIFICATION_SENT',\n  TASK_CREATED = 'TASK_CREATED',\n  CUSTOM_ACTIVITY = 'CUSTOM_ACTIVITY',\n}\n\n/** @enumType */\nexport type ActivityTypeWithLiterals =\n  | ActivityType\n  | 'UNRECOGNIZED_TYPE'\n  | 'SCHEDULED'\n  | 'EMAIL_SENT'\n  | 'EMAIL_NOT_SENT'\n  | 'NOTIFICATION_SENT'\n  | 'TASK_CREATED'\n  | 'CUSTOM_ACTIVITY';\n\nexport interface CustomData {\n  /**\n   * Activity unique namespace\n   * @maxLength 50\n   */\n  namespace?: string | null;\n  /** Custom json field for any desired data */\n  customValue?: Record<string, any> | null;\n}\n\nexport interface CartAbandonedEvent {\n  /** @format GUID */\n  cartId?: string;\n  /**\n   * Time the cart was created\n   * @readonly\n   */\n  creationTime?: Date | null;\n  /**\n   * Time the cart was abandoned\n   * @readonly\n   */\n  abandonTime?: Date | null;\n  /** Buyer information */\n  buyerInfo?: BuyerInfo;\n  /** Amount of items in cart */\n  itemsCount?: number;\n  /** Coupon ID (if relevant) */\n  couponId?: string;\n  /** Subtotal of all line items in cart, not before shipping and taxes */\n  totals?: Totals;\n  /**\n   * Checkout URL - checkout with the abandoned cart details\n   * @format WEB_URL\n   */\n  checkoutUrl?: string;\n}\n\nexport interface Totals {\n  /**\n   * Subtotal of all line items in cart, without shipping and taxes\n   * @max 999999999.99\n   */\n  subtotal?: number | null;\n  /**\n   * Total cart price\n   * @max 999999999.99\n   */\n  total?: number | null;\n  /** Formatted total cart price includes currency symbol */\n  formattedTotal?: string;\n}\n\nexport interface CartRecoveredEvent {\n  /** @format GUID */\n  cartId?: string;\n  /**\n   * Time the cart was recovered\n   * @readonly\n   */\n  recoveredTime?: Date | null;\n  /**\n   * Time the cart was created\n   * @readonly\n   */\n  creationTime?: Date | null;\n  /**\n   * Time the cart was abandoned\n   * @readonly\n   */\n  abandonedTime?: Date | null;\n}\n\nexport interface CartDeletedEvent {\n  /** @format GUID */\n  instanceId?: string;\n  /** @format GUID */\n  cartId?: string;\n}\n\nexport interface GetAbandonedCartRequest {\n  /**\n   * Cart ID\n   * @format GUID\n   */\n  _id: string;\n}\n\nexport interface GetAbandonedCartResponse {\n  /** Cart details */\n  abandonedCart?: AbandonedCart;\n}\n\nexport interface QueryAbandonedCartsRequest {\n  /** Query details */\n  query?: Query;\n}\n\nexport interface Query {\n  paging?: Paging;\n  /** A filter string, for more information see the intro section */\n  filter?: string | null;\n  /** Sort string, for more information see the intro section */\n  sort?: string | null;\n}\n\nexport interface Paging {\n  /**\n   * The number of items to load\n   * @max 100\n   */\n  limit?: number | null;\n  /** The offset since the beginning of the collection */\n  offset?: number | null;\n}\n\nexport interface QueryAbandonedCartsResponse {\n  /** Abandoned carts list */\n  abandonedCarts?: AbandonedCart[];\n  /** Total number of carts */\n  totalResults?: number;\n}\n\nexport interface DeleteCartRequest {\n  /**\n   * Cart ID\n   * @format GUID\n   */\n  _id?: string;\n}\n\nexport interface DeleteCartResponse {}\n\nexport interface RedirectToCheckoutRequest {\n  /**\n   * abandoned cart id\n   * @format GUID\n   */\n  _id?: string;\n  /**\n   * Identifier of the metaSite this cart uses\n   * @format GUID\n   */\n  metaSiteId?: string;\n  /**\n   * The currency code to create the redirection link with\n   * @format CURRENCY\n   */\n  currency?: string | null;\n}\n\nexport interface RawHttpResponse {\n  body?: Uint8Array;\n  statusCode?: number | null;\n  headers?: HeadersEntry[];\n}\n\nexport interface HeadersEntry {\n  key?: string;\n  value?: string;\n}\n\nexport interface MessageEnvelope {\n  /**\n   * App instance ID.\n   * @format GUID\n   */\n  instanceId?: string | null;\n  /**\n   * Event type.\n   * @maxLength 150\n   */\n  eventType?: string;\n  /** The identification type and identity data. */\n  identity?: IdentificationData;\n  /** Stringify payload. */\n  data?: string;\n}\n\nexport interface IdentificationData extends IdentificationDataIdOneOf {\n  /**\n   * ID of a site visitor that has not logged in to the site.\n   * @format GUID\n   */\n  anonymousVisitorId?: string;\n  /**\n   * ID of a site visitor that has logged in to the site.\n   * @format GUID\n   */\n  memberId?: string;\n  /**\n   * ID of a Wix user (site owner, contributor, etc.).\n   * @format GUID\n   */\n  wixUserId?: string;\n  /**\n   * ID of an app.\n   * @format GUID\n   */\n  appId?: string;\n  /** @readonly */\n  identityType?: WebhookIdentityTypeWithLiterals;\n}\n\n/** @oneof */\nexport interface IdentificationDataIdOneOf {\n  /**\n   * ID of a site visitor that has not logged in to the site.\n   * @format GUID\n   */\n  anonymousVisitorId?: string;\n  /**\n   * ID of a site visitor that has logged in to the site.\n   * @format GUID\n   */\n  memberId?: string;\n  /**\n   * ID of a Wix user (site owner, contributor, etc.).\n   * @format GUID\n   */\n  wixUserId?: string;\n  /**\n   * ID of an app.\n   * @format GUID\n   */\n  appId?: string;\n}\n\nexport enum WebhookIdentityType {\n  UNKNOWN = 'UNKNOWN',\n  ANONYMOUS_VISITOR = 'ANONYMOUS_VISITOR',\n  MEMBER = 'MEMBER',\n  WIX_USER = 'WIX_USER',\n  APP = 'APP',\n}\n\n/** @enumType */\nexport type WebhookIdentityTypeWithLiterals =\n  | WebhookIdentityType\n  | 'UNKNOWN'\n  | 'ANONYMOUS_VISITOR'\n  | 'MEMBER'\n  | 'WIX_USER'\n  | 'APP';\n\nexport interface BaseEventMetadata {\n  /**\n   * App instance ID.\n   * @format GUID\n   */\n  instanceId?: string | null;\n  /**\n   * Event type.\n   * @maxLength 150\n   */\n  eventType?: string;\n  /** The identification type and identity data. */\n  identity?: IdentificationData;\n}\n\nexport interface AbandonedCartCartAbandonedEnvelope {\n  data: CartAbandonedEvent;\n  metadata: BaseEventMetadata;\n}\n\n/**\n * <blockquote class='warning'>\n *\n * __Deprecation Notice:__\n *\n * This webhook has been replaced with the\n * [Abandoned Checkout Created Webhook](https://dev.wix.com/docs/rest/api-reference/wix-e-commerce/abandoned-checkout/abandoned-checkout-created)\n * and will be removed on March 31, 2024.\n *\n * </blockquote>\n * @permissionScope Manage Stores - all permissions\n * @permissionScopeId SCOPE.DC-STORES-MEGA.MANAGE-STORES\n * @permissionScope Manage Stores\n * @permissionScopeId SCOPE.STORES.MANAGE-STORES\n * @permissionScope Read Orders\n * @permissionScopeId SCOPE.DC-STORES.READ-ORDERS\n * @permissionScope Read Stores - all read permissions\n * @permissionScopeId SCOPE.DC-STORES-MEGA.READ-STORES\n * @permissionScope Manage Restaurants - all permissions\n * @permissionScopeId SCOPE.RESTAURANTS.MEGA-SCOPES\n * @permissionScope Manage Orders\n * @permissionScopeId SCOPE.DC-STORES.MANAGE-ORDERS\n * @permissionId WIX_STORES.READ_ABANDONED_CARTS\n * @webhook\n * @eventType com.wix.ecommerce.cart.abandonment.api.v1.CartAbandonedEvent\n * @serviceIdentifier wix.cart.abandonment.api.v1.AbandonedCarts\n * @slug cart_abandoned_event\n * @deprecated\n * @replacedBy wix.ecom.abandoned_checkout.api.v1.AbandonedCheckouts.CREATED\n * @targetRemovalDate 2024-03-31\n */\nexport declare function onAbandonedCartCartAbandonedEvent(\n  handler: (event: AbandonedCartCartAbandonedEnvelope) => void | Promise<void>\n): void;\n\nexport interface AbandonedCartCartRecoveredEnvelope {\n  data: CartRecoveredEvent;\n  metadata: BaseEventMetadata;\n}\n\n/**\n * <blockquote class='warning'>\n *\n * __Deprecation Notice:__\n *\n * This webhook has been replaced with the\n * [Abandoned Checkout Recovered Webhook](https://dev.wix.com/docs/rest/api-reference/wix-e-commerce/abandoned-checkout/abandoned-checkout-recovered)\n * and will be removed on March 31, 2024.\n *\n * </blockquote>\n * @permissionScope Manage Stores - all permissions\n * @permissionScopeId SCOPE.DC-STORES-MEGA.MANAGE-STORES\n * @permissionScope Manage Stores\n * @permissionScopeId SCOPE.STORES.MANAGE-STORES\n * @permissionScope Read Orders\n * @permissionScopeId SCOPE.DC-STORES.READ-ORDERS\n * @permissionScope Read Stores - all read permissions\n * @permissionScopeId SCOPE.DC-STORES-MEGA.READ-STORES\n * @permissionScope Manage Restaurants - all permissions\n * @permissionScopeId SCOPE.RESTAURANTS.MEGA-SCOPES\n * @permissionScope Manage Orders\n * @permissionScopeId SCOPE.DC-STORES.MANAGE-ORDERS\n * @permissionId WIX_STORES.READ_ABANDONED_CARTS\n * @webhook\n * @eventType com.wix.ecommerce.cart.abandonment.api.v1.CartRecoveredEvent\n * @serviceIdentifier wix.cart.abandonment.api.v1.AbandonedCarts\n * @slug cart_recovered_event\n * @deprecated\n * @replacedBy wix.ecom.abandoned_checkout.api.v1.AbandonedCheckoutService.recovered\n * @targetRemovalDate 2024-03-31\n */\nexport declare function onAbandonedCartCartRecoveredEvent(\n  handler: (event: AbandonedCartCartRecoveredEnvelope) => void | Promise<void>\n): void;\n\n/**\n * Returns abandoned carts based on the cart ID\n * @param _id - Cart ID\n * @internal\n * @documentationMaturity preview\n * @requiredField _id\n * @permissionId WIX_STORES.READ_ABANDONED_CARTS\n * @applicableIdentity APP\n * @returns Cart details\n * @fqn wix.cart.abandonment.api.v1.AbandonedCarts.GetAbandonedCart\n * @deprecated\n * @targetRemovalDate 2024-03-31\n */\nexport async function getAbandonedCart(\n  _id: string\n): Promise<\n  NonNullablePaths<\n    AbandonedCart,\n    | `_id`\n    | `status`\n    | `buyerInfo._id`\n    | `buyerInfo.identityType`\n    | `activities`\n    | `activities.${number}.activityType`,\n    4\n  >\n> {\n  // @ts-ignore\n  const { httpClient, sideEffects } = arguments[1] as {\n    httpClient: HttpClient;\n    sideEffects?: any;\n  };\n\n  const payload = renameKeysFromSDKRequestToRESTRequest({ id: _id });\n\n  const reqOpts = ambassadorWixStoresV1AbandonedCart.getAbandonedCart(payload);\n\n  sideEffects?.onSiteCall?.();\n  try {\n    const result = await httpClient.request(reqOpts);\n    sideEffects?.onSuccess?.(result);\n\n    return renameKeysFromRESTResponseToSDKResponse(result.data)?.abandonedCart!;\n  } catch (err: any) {\n    const transformedError = sdkTransformError(\n      err,\n      {\n        spreadPathsToArguments: {},\n        explicitPathsToArguments: { id: '$[0]' },\n        singleArgumentUnchanged: false,\n      },\n      ['_id']\n    );\n    sideEffects?.onError?.(err);\n\n    throw transformedError;\n  }\n}\n\n/**\n * Returns abandoned carts based on the requested query parameters\n * @internal\n * @documentationMaturity preview\n * @permissionId WIX_STORES.READ_ABANDONED_CARTS\n * @applicableIdentity APP\n * @fqn wix.cart.abandonment.api.v1.AbandonedCarts.QueryAbandonedCarts\n * @deprecated\n * @targetRemovalDate 2024-03-31\n */\nexport async function queryAbandonedCarts(\n  options?: QueryAbandonedCartsOptions\n): Promise<\n  NonNullablePaths<\n    QueryAbandonedCartsResponse,\n    | `abandonedCarts`\n    | `abandonedCarts.${number}._id`\n    | `abandonedCarts.${number}.status`\n    | `abandonedCarts.${number}.buyerInfo._id`\n    | `abandonedCarts.${number}.buyerInfo.identityType`\n    | `totalResults`,\n    5\n  >\n> {\n  // @ts-ignore\n  const { httpClient, sideEffects } = arguments[1] as {\n    httpClient: HttpClient;\n    sideEffects?: any;\n  };\n\n  const payload = renameKeysFromSDKRequestToRESTRequest({\n    query: options?.query,\n  });\n\n  const reqOpts =\n    ambassadorWixStoresV1AbandonedCart.queryAbandonedCarts(payload);\n\n  sideEffects?.onSiteCall?.();\n  try {\n    const result = await httpClient.request(reqOpts);\n    sideEffects?.onSuccess?.(result);\n\n    return renameKeysFromRESTResponseToSDKResponse(result.data)!;\n  } catch (err: any) {\n    const transformedError = sdkTransformError(\n      err,\n      {\n        spreadPathsToArguments: {},\n        explicitPathsToArguments: { query: '$[0].query' },\n        singleArgumentUnchanged: false,\n      },\n      ['options']\n    );\n    sideEffects?.onError?.(err);\n\n    throw transformedError;\n  }\n}\n\nexport interface QueryAbandonedCartsOptions {\n  /** Query details */\n  query?: Query;\n}\n","import { toURLSearchParams } from '@wix/sdk-runtime/rest-modules';\nimport { transformRESTTimestampToSDKTimestamp } from '@wix/sdk-runtime/transformations/timestamp';\nimport { transformPaths } from '@wix/sdk-runtime/transformations/transform-paths';\nimport { resolveUrl } from '@wix/sdk-runtime/rest-modules';\nimport { ResolveUrlOpts } from '@wix/sdk-runtime/rest-modules';\nimport { RequestOptionsFactory } from '@wix/sdk-types';\n\nfunction resolveWixCartAbandonmentApiV1AbandonedCartsUrl(\n  opts: Omit<ResolveUrlOpts, 'domainToMappings'>\n) {\n  const domainToMappings = {};\n\n  return resolveUrl(Object.assign(opts, { domainToMappings }));\n}\n\nconst PACKAGE_NAME = '@wix/auto_sdk_stores_abandoned-carts';\n\n/**\n * Returns abandoned carts based on the cart ID\n * @deprecated Will be removed on 2024-03-31.\n */\nexport function getAbandonedCart(payload: object): RequestOptionsFactory<any> {\n  function __getAbandonedCart({ host }: any) {\n    const metadata = {\n      entityFqdn: 'wix.stores.v1.abandoned_cart',\n      method: 'GET' as any,\n      methodFqn: 'wix.cart.abandonment.api.v1.AbandonedCarts.GetAbandonedCart',\n      packageName: PACKAGE_NAME,\n      migrationOptions: {\n        optInTransformResponse: true,\n      },\n      url: resolveWixCartAbandonmentApiV1AbandonedCartsUrl({\n        protoPath: '/v1/abandonedCarts/{id}',\n        data: payload,\n        host,\n      }),\n      params: toURLSearchParams(payload),\n      transformResponse: (payload: any) =>\n        transformPaths(payload, [\n          {\n            transformFn: transformRESTTimestampToSDKTimestamp,\n            paths: [\n              { path: 'abandonedCart.abandonTime' },\n              { path: 'abandonedCart.activities.timestamp' },\n            ],\n          },\n        ]),\n    };\n\n    return metadata;\n  }\n\n  return __getAbandonedCart;\n}\n\n/**\n * Returns abandoned carts based on the requested query parameters\n * @deprecated Will be removed on 2024-03-31.\n */\nexport function queryAbandonedCarts(\n  payload: object\n): RequestOptionsFactory<any> {\n  function __queryAbandonedCarts({ host }: any) {\n    const metadata = {\n      entityFqdn: 'wix.stores.v1.abandoned_cart',\n      method: 'POST' as any,\n      methodFqn:\n        'wix.cart.abandonment.api.v1.AbandonedCarts.QueryAbandonedCarts',\n      packageName: PACKAGE_NAME,\n      migrationOptions: {\n        optInTransformResponse: true,\n      },\n      url: resolveWixCartAbandonmentApiV1AbandonedCartsUrl({\n        protoPath: '/v1/abandonedCarts/query',\n        data: payload,\n        host,\n      }),\n      data: payload,\n      transformResponse: (payload: any) =>\n        transformPaths(payload, [\n          {\n            transformFn: transformRESTTimestampToSDKTimestamp,\n            paths: [\n              { path: 'abandonedCarts.abandonTime' },\n              { path: 'abandonedCarts.activities.timestamp' },\n            ],\n          },\n        ]),\n    };\n\n    return metadata;\n  }\n\n  return __queryAbandonedCarts;\n}\n","import {\n  getAbandonedCart as publicGetAbandonedCart,\n  queryAbandonedCarts as publicQueryAbandonedCarts,\n} from './stores-v1-abandoned-cart-abandoned-carts.public.js';\nimport { createRESTModule } from '@wix/sdk-runtime/rest-modules';\nimport { createEventModule } from '@wix/sdk-runtime/event-definition-modules';\nimport {\n  BuildRESTFunction,\n  MaybeContext,\n  BuildEventDefinition,\n} from '@wix/sdk-types';\nimport { onAbandonedCartCartAbandonedEvent as publicOnAbandonedCartCartAbandonedEvent } from './stores-v1-abandoned-cart-abandoned-carts.public.js';\nimport { onAbandonedCartCartRecoveredEvent as publicOnAbandonedCartCartRecoveredEvent } from './stores-v1-abandoned-cart-abandoned-carts.public.js';\n\n/** @internal */\nexport const getAbandonedCart: MaybeContext<\n  BuildRESTFunction<typeof publicGetAbandonedCart> &\n    typeof publicGetAbandonedCart\n> = /*#__PURE__*/ createRESTModule(publicGetAbandonedCart);\n/** @internal */\nexport const queryAbandonedCarts: MaybeContext<\n  BuildRESTFunction<typeof publicQueryAbandonedCarts> &\n    typeof publicQueryAbandonedCarts\n> = /*#__PURE__*/ createRESTModule(publicQueryAbandonedCarts);\n/**\n * <blockquote class='warning'>\n *\n * __Deprecation Notice:__\n *\n * This webhook has been replaced with the\n * [Abandoned Checkout Created Webhook](https://dev.wix.com/docs/rest/api-reference/wix-e-commerce/abandoned-checkout/abandoned-checkout-created)\n * and will be removed on March 31, 2024.\n *\n * </blockquote>\n * @deprecated\n */\nexport const onAbandonedCartCartAbandonedEvent: BuildEventDefinition<\n  typeof publicOnAbandonedCartCartAbandonedEvent\n> &\n  typeof publicOnAbandonedCartCartAbandonedEvent = createEventModule(\n  publicOnAbandonedCartCartAbandonedEvent\n);\n/**\n * <blockquote class='warning'>\n *\n * __Deprecation Notice:__\n *\n * This webhook has been replaced with the\n * [Abandoned Checkout Recovered Webhook](https://dev.wix.com/docs/rest/api-reference/wix-e-commerce/abandoned-checkout/abandoned-checkout-recovered)\n * and will be removed on March 31, 2024.\n *\n * </blockquote>\n * @deprecated\n */\nexport const onAbandonedCartCartRecoveredEvent: BuildEventDefinition<\n  typeof publicOnAbandonedCartCartRecoveredEvent\n> &\n  typeof publicOnAbandonedCartCartRecoveredEvent = createEventModule(\n  publicOnAbandonedCartCartRecoveredEvent\n);\n\nexport {\n  Status,\n  Identity,\n  ActivityType,\n  WebhookIdentityType,\n} from './stores-v1-abandoned-cart-abandoned-carts.universal.js';\nexport {\n  AbandonedCart,\n  BuyerInfo,\n  Activity,\n  CustomData,\n  CartAbandonedEvent,\n  Totals,\n  CartRecoveredEvent,\n  CartDeletedEvent,\n  GetAbandonedCartRequest,\n  GetAbandonedCartResponse,\n  QueryAbandonedCartsRequest,\n  Query,\n  Paging,\n  QueryAbandonedCartsResponse,\n  DeleteCartRequest,\n  DeleteCartResponse,\n  RedirectToCheckoutRequest,\n  RawHttpResponse,\n  HeadersEntry,\n  MessageEnvelope,\n  IdentificationData,\n  IdentificationDataIdOneOf,\n  BaseEventMetadata,\n  AbandonedCartCartAbandonedEnvelope,\n  AbandonedCartCartRecoveredEnvelope,\n  QueryAbandonedCartsOptions,\n} from './stores-v1-abandoned-cart-abandoned-carts.universal.js';\nexport {\n  StatusWithLiterals,\n  IdentityWithLiterals,\n  ActivityTypeWithLiterals,\n  WebhookIdentityTypeWithLiterals,\n} from './stores-v1-abandoned-cart-abandoned-carts.universal.js';\n"],"mappings":"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","names":["getAbandonedCart","onAbandonedCartCartAbandonedEvent","onAbandonedCartCartRecoveredEvent","queryAbandonedCarts","import_rename_all_nested_keys","import_timestamp","import_transform_paths","import_rest_modules","payload","Status","Identity","ActivityType","WebhookIdentityType","getAbandonedCart","sdkTransformError","queryAbandonedCarts","getAbandonedCart","queryAbandonedCarts","import_rest_modules","getAbandonedCart","queryAbandonedCarts","onAbandonedCartCartAbandonedEvent","onAbandonedCartCartRecoveredEvent"]}